<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Painel do Nutricionista</title>
  <link rel="stylesheet" href="styles/Painelnutricionista.css">
</head>
<body>
  <div class="container">
    <!-- Barra lateral do nutricionista -->
    <div class="sidebar">
      <div class="perfil">
        <input type="file" id="uploadFotoNutri" class="upload-foto" onchange="carregarFotoNutri(event)">
        <img src="img/nutri.jpg" alt="Foto de Perfil" id="fotoPerfilNutri">
        <h2>Dr. Pedro Oliveira</h2>
        <p>Nutricionista</p>
      </div>

      <nav class="menu">
        <button onclick="mostrarSecao('clientes')">Meus Clientes</button>
        <button onclick="mostrarSecao('consultas')">Consultas Agendadas</button>
        <button onclick="mostrarSecao('planos')">Planos Alimentares</button>
        <button onclick="mostrarSecao('dados')">Meus Dados</button>
      </nav>
    </div>

    <!-- Conteúdo principal -->
    <div class="conteudo">
      <section id="clientes" class="secao">
        <h3>Meus Clientes</h3>
        <ul>
          <li>Maria Souza - Última consulta: 10/04/2025 
            <button class="chat-btn" onclick="iniciarChat('Maria Souza')">Iniciar Chat</button>
          </li>
          <li>João Silva - Última consulta: 12/03/2025 
            <button class="chat-btn" onclick="iniciarChat('João Silva')">Iniciar Chat</button>
          </li>
        </ul>
      </section>

      <section id="consultas" class="secao">
        <h3>Consultas Agendadas</h3>
        <ul>
          <li>15/05/2025 - 14:00 - Maria Souza</li>
          <li>18/05/2025 - 10:00 - João Silva</li>
        </ul>
      </section>

      <section id="planos" class="secao">
        <h3>Planos Alimentares</h3>
        <ul>
          <li><strong>Maria Souza:</strong> Dieta de emagrecimento</li>
          <li><strong>João Silva:</strong> Dieta para hipertrofia</li>
        </ul>
      </section>

      <section id="dados" class="secao">
        <h3>Meus Dados</h3>
        <p><strong>Email:</strong> pedro@nuto.com</p>
        <p><strong>Telefone:</strong> (11) 98765-4321</p>
        <p><strong>Especialidade:</strong> Nutrição esportiva</p>
      </section>

      <section id="chat" class="secao" style="display:none;">
        <h3>Chat com <span id="clienteNome">Maria Souza</span></h3>
        <div id="mensagens" class="chat-box"></div>
        <textarea id="novaMensagem" placeholder="Digite sua mensagem..."></textarea>
        <button onclick="enviarMensagem()">Enviar</button>
      </section>
    </div>
  </div>

  <script>
    function mostrarSecao(secaoId) {
      const secoes = document.querySelectorAll('.secao');
      secoes.forEach(secao => secao.style.display = 'none');
      const secaoAtiva = document.getElementById(secaoId);
      secaoAtiva.style.display = 'block';
    }

    function carregarFotoNutri(event) {
      const foto = document.getElementById('fotoPerfilNutri');
      foto.src = URL.createObjectURL(event.target.files[0]);
    }

    function iniciarChat(cliente) {
      // Mostrar a seção de chat e o nome do cliente
      document.getElementById('chat').style.display = 'block';
      document.getElementById('clienteNome').textContent = cliente;

      // Limpar o campo de mensagens ao iniciar um novo chat
      document.getElementById('mensagens').innerHTML = '';
      document.getElementById('novaMensagem').value = '';
    }

    function enviarMensagem() {
      const mensagem = document.getElementById('novaMensagem').value;
      if (mensagem.trim() !== '') {
        // Adicionar a mensagem na tela
        const mensagens = document.getElementById('mensagens');
        const novaMensagem = document.createElement('div');
        novaMensagem.classList.add('mensagem');
        novaMensagem.textContent = mensagem;
        mensagens.appendChild(novaMensagem);

        // Limpar o campo de entrada de texto
        document.getElementById('novaMensagem').value = '';
        
        // Manter o chat sempre visível
        mensagens.scrollTop = mensagens.scrollHeight;
      }
    }

    mostrarSecao('clientes');
  </script>
</body>
</html>